function getLocalStorage(){if("object"==typeof localStorage)return localStorage;if("object"==typeof globalStorage)return globalStorage[location.host];throw new Error("Local Storage not available. ")}function hideActionSheet(e,t){e.removeClass("weui_actionsheet_toggle"),t.removeClass("weui_fade_toggle"),e.on("transitionend",function(){t.hide()}).on("webkitTransitionEnd",function(){t.hide()})}$(function(){var e=$("#calcu button"),t=$("#calcu .screen");keyVal.push(equal),keyVal.push(clear),keyVal.push(back),keyVal.push(last),initMenu(),e.on("touchend",function(){function e(e){for(var t=0,a=-1;t<keyVal.length;t++)if(e===keyVal[t].name){var a=t;break}return a}var a=$(this),o=a.data("val"),n=t.val();if("last"!==o&&sessionStorage.clear(),a.hasClass("operators")&&e(o)>-1){var l=e(o);n=keyVal[l].method(n)}else n+=o;return t.val(n)})});var keyVal=[],temp_count=getLocalStorage().getItem("storage_count"),storage_count=temp_count?temp_count:0,equal={name:"equal",method:function(_val){var key=storage_count%10,equalVal=eval(_val);getLocalStorage().setItem(key,_val+"="+equalVal),storage_count++,getLocalStorage().setItem("storage_count",storage_count);var calcuHistoryItem=$("#calcu .weui_actionsheet_menu .weui_actionsheet_cell "),readyItem=_val+"="+equalVal;if(calcuHistoryItem.length>9){var rmItem=calcuHistoryItem.last();rmItem.remove()}return creatSheetItem(readyItem),equalVal}},clear={name:"clear",method:function(e){return""}},back={name:"back",method:function(e){var t=e.split("");return t.pop(),console.log(t),t.join("")}},last={name:"last",method:function(){lastOut()}},initMenu=function(){for(var e=getLocalStorage().length,t=0;e-1>t;t++){var a=getLocalStorage().getItem(t);creatSheetItem(a)}},creatSheetItem=function(e){var t=$("<div class='weui_actionsheet_cell' >"+e+"</div>"),a=$("#calcu .weui_actionsheet_menu");t.prependTo(a)},lastOut=function(){var e=$("#mask"),t=$("#weui_actionsheet");t.addClass("weui_actionsheet_toggle"),e.show().addClass("weui_fade_toggle").one("touchend",function(){hideActionSheet(t,e)}),$("#actionsheet_cancel").one("touchend",function(){hideActionSheet(t,e)}),t.unbind("transitionend").unbind("webkitTransitionEnd")};
//# sourceMappingURL=calculate.js.map
